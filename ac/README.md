# 深信服上网行为管理操作库

本库编写时使用的测试设备版本为 `AC13.0.18`

## 1 使用示例

安装

```text
go get github.com/golang-common/sangfor
```

运行

```go
package main

import (
	"fmt"
	"github.com/golang-common/sangfor/ac"
)

func main() {
	AClient := ac.NewAC("172.22.0.73:9999", "secret", true)
	ver, err := AClient.Status().Version()
	if err != nil {
		panic(err)
	}
	fmt.Println(ver)
}

```

正常时输出结果

```text
AC13.0.18.046 Build20210909
```

## 2 支持的操作

状态操作：
- 获取版本号
- 获取在线用户数
- 获取当前设备会话数
- 获取内置库版本信息(包含病毒库,URL库等模块)
- 获取日志计数统计(拦截日志,记录日志)
- 获取设备的实时CPU使用率(百分比整数)
- 获取设备的实时内存使用率(百分比整数)
- 获取设备的磁盘使用率(百分比整数)
- 获取带宽使用率
- 获取设备的当前系统时间
- 获取设备当前上行和下行流量
- 获取用户流量排行
- 获取应用流量排行

用户操作：
- 添加用户
- 删除用户
- 修改用户
- 获取用户详细信息
- 获取用户的上网策略列表
- 设置用户的上网策略
- 获取用户的流控策略
- 设置用户的流控策略
- 验证用户密码(单元测试不通过)

组操作：
- 添加组
- 删除组
- 修改组
- 设置组的上网策略
- 获取组的上网策略

绑定操作：
- 查询用户和IP/MAC的绑定关系
- 增加用户和IP/MAC的绑定关系
- 删除用户和IP/MAC的绑定关系
- 查询IP/Mac绑定关系
- 增加IP/Mac的绑定关系
- 删除IP/MAC的绑定关系

策略操作：
- 获取设备已有上网策略信息
- 获取设备已有流控策略信息

在线用户操作：
- 获取在线用户列表
- 强制注销在线用户(踢下线)
- 上线在线用户(单点登录)

## 3 问题列表

- [ ] 增加用户时赞只支持基本属性，扩展属性暂不生效，有可能是版本问题
- [ ] 验证用户密码接口未生效，需要进一步确认 